<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
  <title>포토게시판</title>
  <link rel="stylesheet" th:href="@{/css/custom-buttons.css}">
  <style>
    /* 갤러리 그리드 */
    .photo-gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-top: 1.5rem;
    }

    .photo-card {
      border-radius: 8px;
      overflow: hidden;
      transition: transform 0.2s, box-shadow 0.2s;
      background: white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .photo-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .photo-thumbnail {
      width: 100%;
      height: 200px;
      object-fit: cover;
      background-color: #f0f0f0;
    }

    .photo-content {
      padding: 1rem;
    }

    .photo-title {
      font-weight: 600;
      font-size: 1rem;
      margin-bottom: 0.5rem;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .photo-meta {
      display: flex;
      justify-content: space-between;
      font-size: 0.875rem;
      color: #666;
    }
  </style>
</head>
<body>
<div class="container mt-4">
  <!-- 헤더 -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2><i class="bi bi-images"></i> 포토게시판 (<span th:text="${page.totalElements}"></span>)</h2>
    <a th:href="@{/photo/write}" class="custom-btn custom-btn-dark">
      <i class="bi bi-pencil me-1"></i> 사진 올리기
    </a>
  </div>

  <!-- 갤러리 그리드 -->
  <div th:if="${#lists.isEmpty(posts)}" class="alert alert-light text-center py-5">
    <i class="bi bi-images fs-1 text-muted"></i>
    <p class="mt-3 mb-0 text-muted">아직 등록된 사진이 없습니다.</p>
  </div>

  <div th:if="${!#lists.isEmpty(posts)}" class="photo-gallery">
    <div th:each="post : ${posts}" class="photo-card">
      <a th:href="@{/photo/detail/{id}(id=${post.id})}" style="text-decoration: none; color: inherit;">
        <!-- 썸네일 (에러 시 기본 이미지로 fallback) -->
        <img th:if="${post.thumbnailUrl != null && !post.thumbnailUrl.isEmpty()}"
             th:src="${post.thumbnailUrl}"
             th:alt="${post.title}"
             class="photo-thumbnail"
             onerror="this.onerror=null; this.src='/images/default-photo.png'; this.style.objectFit='contain';">

        <!-- 썸네일이 없는 경우 기본 아이콘 표시 -->
        <div th:if="${post.thumbnailUrl == null || post.thumbnailUrl.isEmpty()}"
             class="photo-thumbnail d-flex align-items-center justify-content-center"
             style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
          <i class="bi bi-camera text-white" style="font-size: 3rem; opacity: 0.8;"></i>
        </div>

        <!-- 내용 -->
        <div class="photo-content">
          <div class="photo-title" th:text="${post.title}">제목</div>
          <div class="photo-meta">
            <span><i class="bi bi-person"></i> <span th:text="${post.author}"></span></span>
            <span><i class="bi bi-eye"></i> <span th:text="${post.viewCount}"></span></span>
          </div>
        </div>
      </a>
    </div>
  </div>

  <!-- 페이징 -->
  <div th:if="${!#lists.isEmpty(posts)}" class="mt-4">
    <div th:replace="fragments/pagination :: pagination('/photo/list', ${page})"></div>
  </div>
</div>
</body>
</html>

