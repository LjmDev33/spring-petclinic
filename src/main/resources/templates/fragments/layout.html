<!DOCTYPE html>
<html th:fragment="layout (template, menu)" xmlns:th="https://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- 모바일 반응형 뷰포트 (필수) -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="_csrf" th:content="${_csrf.token}"/>
  <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
  <title th:text="#{layoutTitle}">솔 동물의료센터 :: PetClinic</title>

  <!-- 내장 WebJars 라이브러리 -->
  <link th:href="@{/webjars/bootstrap/dist/css/bootstrap.css}" rel="stylesheet">
  <link th:href="@{/webjars/font-awesome/css/font-awesome.min.css}" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/petclinic.css}" />

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background-color: #fcfcfc;
    }

    /* 네비게이션 및 상단 라인 */
    .navbar {
      position: relative;
      z-index: 1050;
      background-color: #ffffff !important;
      border-bottom: 1px solid #eee;
      border-top: 5px solid #8cc63f;
    }
    .nav-item.dropdown {
      position: relative;
      z-index: 1055;
    }

    /* === [데스크탑 전용 (992px 이상) - Hover 드롭다운] === */
    @media (min-width: 992px) {
      .dropdown-menu {
        border: 1px solid #eee;
        border-radius: 4px;
        z-index: 1070 !important;
        position: absolute !important;
        box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        padding: 0.5rem 0;
      }
      .nav-item.dropdown:hover .dropdown-menu {
        display: block;
        margin-top: 0;
        animation: fadeIn 0.2s ease-in-out;
      }
    }

    /* === [모바일 전용 (991.98px 이하) - Smooth Sliding Down Animation] === */
    @media (max-width: 991.98px) {
      .navbar-nav .dropdown-menu {
        display: block !important;
        max-height: 0;
        opacity: 0;
        overflow: hidden;
        padding-top: 0 !important;
        padding-bottom: 0 !important;
        margin: 0;
        border: none;
        box-shadow: none;
        background-color: transparent;
        padding-left: 1rem;
        transition: max-height 0.4s ease-in-out, opacity 0.4s ease-in-out, padding 0.4s ease-in-out;
      }
      .navbar-nav .dropdown-menu.show {
        max-height: 400px;
        opacity: 1;
        padding-top: 0.5rem !important;
        padding-bottom: 0.5rem !important;
      }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(5px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .dropdown-toggle::after { display: none !important; }

    .dropdown-item {
      padding: 0.7rem 1.5rem !important;
      font-size: 0.95rem;
      transition: background-color 0.2s, color 0.2s;
    }
    .dropdown-item:hover {
      background-color: #f8f9fa;
      color: #8cc63f;
    }
    .navbar .container { max-width: 1400px; }

    /* 메인 네비게이션 링크 텍스트 설정 (개방감 확보를 위해 padding 상하 증가) */
    .navbar-nav .nav-item .nav-link {
      color: #444 !important;
      font-weight: 500;
      font-size: 1.05rem !important;
      padding: 1.8rem 0.5rem !important; /* 상하 여백 증가 */
      transition: color 0.3s ease;
    }
    @media (max-width: 991.98px) {
      .navbar-nav .nav-item .nav-link { padding: 1rem 0.5rem !important; }
    }
    .navbar-nav .nav-item:hover > .nav-link { color: #8cc63f !important; }

    /* 하단 푸터 버튼 스타일 (사진4 반영 - Solid Black 버튼) */
    .footer-policy-btn {
      background-color: #1a1a1a;
      color: #fff;
      font-size: 0.85rem;
      padding: 10px 30px;
      text-decoration: none;
      transition: background-color 0.2s;
      display: inline-block;
    }
    .footer-policy-btn:hover {
      background-color: #333;
      color: #fff;
    }

    /* Footer Scroll to Top 버튼 */
    .scroll-top-btn {
      position: absolute;
      bottom: 20px;
      right: 20px;
      background-color: #4a4a4a;
      color: #fff;
      width: 45px;
      height: 45px;
      border-radius: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
      transition: background-color 0.3s;
    }
    .scroll-top-btn:hover {
      background-color: #222;
      color: #fff;
    }
  </style>
</head>

<body>
<!-- 상단 로그인/유틸리티 메뉴 -->
<div class="bg-white">
  <div class="container d-flex justify-content-end py-2 align-items-center" style="max-width: 1400px;">
    <a th:href="@{/}" class="text-decoration-none text-secondary" style="font-size: 0.85rem;">HOME</a>
    <span class="text-secondary mx-2" style="font-size: 0.85rem;">|</span>

    <!-- 로그인하지 않은 경우 -->
    <span sec:authorize="isAnonymous()" class="d-flex align-items-center">
        <a th:href="@{/login}" class="text-decoration-none text-secondary" style="font-size: 0.85rem;">로그인</a>
        <span class="text-secondary mx-2" style="font-size: 0.85rem;">|</span>
        <a th:href="@{/register}" class="text-decoration-none text-secondary" style="font-size: 0.85rem;">회원가입</a>
      </span>

    <!-- 로그인한 경우 -->
    <span sec:authorize="isAuthenticated()" class="d-flex align-items-center">
        <span class="text-success fw-bold" style="font-size: 0.85rem;"
              th:text="${#authentication.principal.nickname != null && !#strings.isEmpty(#authentication.principal.nickname) ? #authentication.principal.nickname : #authentication.principal.username}"></span>
        <span class="text-secondary" style="font-size: 0.85rem;">님</span>
        <span class="text-secondary mx-2" style="font-size: 0.85rem;">|</span>
        <a th:href="@{/mypage}" class="text-decoration-none text-secondary" style="font-size: 0.85rem;">마이페이지</a>
        <span class="text-secondary mx-2" style="font-size: 0.85rem;">|</span>

      <!-- 관리자 전용 메뉴 -->
        <span sec:authorize="hasRole('ADMIN')" class="d-flex align-items-center">
          <a th:href="@{/admin/settings}" class="text-decoration-none text-danger fw-bold" style="font-size: 0.85rem;">
            <i class="fa fa-cog"></i> 설정
          </a>
          <span class="text-secondary mx-2" style="font-size: 0.85rem;">|</span>
        </span>
        <form th:action="@{/logout}" method="post" class="d-inline mb-0">
          <button type="submit" class="btn btn-link text-decoration-none text-secondary p-0" style="font-size: 0.85rem; border: none;">로그아웃</button>
        </form>
      </span>
  </div>
</div>

<!-- 메인 네비게이션 바 (padding 상/하 여백 확대로 개방감 확보) -->
<nav class="navbar navbar-expand-lg py-3">
  <div class="container d-flex align-items-center justify-content-between">
    <!-- 로고 크기 확대 (48px -> 65px) -->
    <a class="navbar-brand me-5" th:href="@{/}">
      <img th:src="@{/images/home_logo01.png}" alt="솔 동물의료센터 로고" style="height:65px;">
    </a>

    <!-- 모바일 햄버거 버튼 -->
    <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <i class="fa fa-bars fs-3 text-secondary"></i>
    </button>

    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav gap-4 gap-xl-5">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" th:onclick="|location.href='@{/introduce/greetings}'|" data-bs-toggle="dropdown">솔 동물의료센터 소개</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" th:href="@{/introduce/greetings}">인사말</a></li>
            <li><a class="dropdown-item" th:href="@{/introduce/staff}">의료진소개</a></li>
            <li><a class="dropdown-item" th:href="@{/introduce/medicalphilosophy}">진료철학</a></li>
            <li><a class="dropdown-item" th:href="@{/introduce/special}">특별함</a></li>
            <li><a class="dropdown-item" th:href="@{/introduce/operatinghours}">운영시간</a></li>
            <li><a class="dropdown-item" th:href="@{/introduce/tourhospital}">병원 둘러보기</a></li>
            <li><a class="dropdown-item" th:href="@{/introduce/directions}">찾아오시는길</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" th:onclick="|location.href='@{/general/internalmedicineclinic}'|" data-bs-toggle="dropdown">일반클리닉</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" th:href="@{/general/internalmedicineclinic}">내과 클리닉</a></li>
            <li><a class="dropdown-item" th:href="@{/general/surgicalclinic}">외과 클리닉</a></li>
            <li><a class="dropdown-item" th:href="@{/general/catclinic}">고양이 클리닉</a></li>
            <li><a class="dropdown-item" th:href="@{/general/skinandearclinic}">Skin & Ear 클리닉</a></li>
            <li><a class="dropdown-item" th:href="@{/general/preventivemedicineclinic}">예방의학 클리닉</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" th:onclick="|location.href='@{/specialization/heartdisease}'|" data-bs-toggle="dropdown">특화클리닉</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" th:href="@{/specialization/heartdisease}">심장질환전문</a></li>
            <li><a class="dropdown-item" th:href="@{/specialization/jointandvertebrae}">관절&척추전문</a></li>
            <li><a class="dropdown-item" th:href="@{/specialization/fracture}">골절전문</a></li>
            <li><a class="dropdown-item" th:href="@{/specialization/dental}">치과전문</a></li>
            <li><a class="dropdown-item" th:href="@{/specialization/endoscope}">내시경전문</a></li>
            <li><a class="dropdown-item" th:href="@{/specialization/caturinary}">고양이 비뇨기계</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" th:onclick="|location.href='@{/minimal/minimallyinvasive}'|" data-bs-toggle="dropdown">최소침습시술</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" th:href="@{/minimal/minimallyinvasive}">복강경중성화수술</a></li>
            <li><a class="dropdown-item" th:href="@{/minimal/brachycephalic}">단두종호흡부전증후군</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" th:onclick="|location.href='@{/counsel/list}'|" data-bs-toggle="dropdown">온라인상담</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" th:href="@{/counsel/list}">온라인상담</a></li>
            <li><a class="dropdown-item" th:href="@{/faq}">자주묻는질문</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" th:onclick="|location.href='@{/community/list(subject='notice')}'|" data-bs-toggle="dropdown">커뮤니티</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" th:href="@{/community/list(subject='notice')}">공지사항</a></li>
            <li><a class="dropdown-item" th:href="@{/photo/list}">고객포토</a></li>
            <li><a class="dropdown-item" href="#">진료후기</a></li>
            <li><a class="dropdown-item" href="#">닥터칼럼</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- === 동적 컨텐츠 주입 영역 === -->
<!-- 메인 비주얼과 컨텐츠 영역은 welcome.html 등 각 템플릿 파일에서 주입됩니다. -->
<th:block th:insert="~{${template}}" />

<!-- 푸터 상단 : 연락처 정보 배너 (레이아웃 공통 적용) -->
<div class="py-4 mt-5" style="background-color: #3f3f3f;">
  <div class="container d-flex flex-wrap justify-content-between align-items-center text-white">
    <div class="d-flex align-items-center gap-4 flex-wrap">
      <div>
        <span class="d-block text-white-50 small mb-1"><i class="fa fa-phone"></i> 진료문의 및 예약</span>
        <h2 class="fw-bold mb-0" style="color: #1ccca0;">031) 345-4500</h2>
      </div>
      <div class="border-start border-secondary ps-4">
        <div class="mb-1"><i class="fa fa-clock-o"></i> 운영시간 <span class="badge bg-danger ms-1">24시간 응급진료</span></div>
        <p class="mb-0 small text-light">주간진료 <span style="color: #1ccca0;">AM 10:00 ~ PM 10:00</span></p>
        <p class="mb-0 small text-light">야간진료 <span style="color: #1ccca0;">PM 10:00 ~ AM 09:00</span></p>
        <p class="mb-0 mt-1 text-white-50" style="font-size: 0.75rem;">내원 전, 세부 운영시간을 확인해주세요.</p>
      </div>
    </div>
    <div class="d-none d-md-flex flex-column gap-2">
      <button class="btn btn-light btn-sm rounded-pill px-3 fw-bold text-success"><i class="fa fa-bold text-success"></i> 메인블로그 바로가기</button>
      <button class="btn btn-light btn-sm rounded-pill px-3 fw-bold text-success"><i class="fa fa-bold text-success"></i> 수술사례 보러가기</button>
    </div>
  </div>
</div>

<!-- 메인 푸터 (요구사항 반영 리팩토링) -->
<div class="pt-5 pb-5 position-relative" style="background-color: #e8e8e8; text-align: center;">
  <div class="container position-relative">

    <!-- 푸터 로고 (그레이스케일 처리) -->
    <div class="mb-4">
      <img th:src="@{/images/home_logo01.png}" alt="솔 동물의료센터" style="height: 45px; filter: grayscale(100%); opacity: 0.4;">
    </div>

    <!-- 법인 및 연락처 정보 -->
    <div class="mb-4" style="font-size: 0.85rem; color: #444; line-height: 1.6;">
      <p class="mb-1">
        상호명 : 솔 동물의료센터 <span class="mx-2 text-black-50">|</span>
        대표자 : 윤대영, 장한나 <span class="mx-2 text-black-50">|</span>
        사업자등록번호 : 622-21-00241
      </p>
      <p class="mb-2">
        경기도 군포시 고산로 529, 금강2단지상가 경기폴리텍고등학교 맞은편 <span class="mx-2 text-black-50">|</span>
        전화번호 : 031-345-4500
      </p>
      <p class="mb-0 text-muted" style="font-size: 0.8rem;">
        Copyright © 2019 By SOL Animal Medical Center. All Rights Reserved.
      </p>
    </div>

    <!-- 푸터 하단 Black 버튼 그룹 -->
    <div class="d-flex justify-content-center gap-2">
      <a th:href="@{#}" class="footer-policy-btn">사이트맵</a>
      <a th:href="@{#}" class="footer-policy-btn">개인정보 취급방침</a>
      <a th:href="@{#}" class="footer-policy-btn">홈페이지 이용약관</a>
    </div>

    <!-- 위로가기 버튼 -->
    <a href="#" class="scroll-top-btn" onclick="window.scrollTo({top:0, behavior:'smooth'}); return false;" title="위로 가기">
      <i class="fa fa-chevron-up"></i>
    </a>

  </div>
</div>

<!-- 내장 WebJars 스크립트 -->
<script th:src="@{/webjars/bootstrap/dist/js/bootstrap.bundle.min.js}"></script>
<script th:src="@{/js/toast-util.js}"></script>
</body>
</html>
